# 実装設計書 - カフェPWAデモアプリ

## 1. 概要
顧客用PWAと店舗管理ダッシュボードのデモ実装を行う。バックエンドとの通信は行わず、すべてMockデータで動作させる。

## 2. プロジェクト構成

### 2.1 リポジトリ構成
```
shop-pwa-demo/
├── customer-app/        # 顧客用PWA
│   ├── src/
│   ├── public/
│   └── package.json
├── admin-dashboard/     # 店舗管理ダッシュボード
│   ├── src/
│   └── package.json
└── shared/             # 共有コンポーネント・型定義
    ├── types/
    └── mock-data/
```

### 2.2 技術スタック
- **共通**: React + TypeScript + Vite
- **顧客用PWA**: 
  - Chakra UI（カジュアルなデザイン）
  - React Router
  - PWA機能（@vite-pwa/plugin）
- **管理ダッシュボード**:
  - shadcn/ui（ビジネス向けデザイン）
  - Recharts（売上グラフ等）

## 3. Mock実装方針

### 3.1 データ管理
```typescript
// shared/mock-data/menu.ts
export const mockMenuItems = [
  {
    id: '1',
    name: 'カフェラテ',
    price: 450,
    category: 'ドリンク',
    image: '/images/latte.jpg',
    customizations: ['サイズ', '甘さ', 'ミルクの種類']
  },
  // ...
];
```

### 3.2 状態管理
- LocalStorageを使用してデータを永続化
- Context APIでグローバル状態管理
- Mock APIレスポンスに遅延を入れてリアル感を演出

### 3.3 Mock API実装
```typescript
// utils/mockApi.ts
export const mockApi = {
  async getMenuItems() {
    await delay(300); // リアルな遅延
    return { data: mockMenuItems };
  },
  
  async createOrder(order: Order) {
    await delay(500);
    const newOrder = { ...order, id: generateId(), status: 'pending' };
    saveToLocalStorage('orders', newOrder);
    return { data: newOrder };
  }
};
```

## 4. 顧客用PWA機能一覧

### 4.1 基本機能
- **ホーム画面**: 
  - おすすめメニュー表示
  - 営業時間・店舗情報
  - クイックアクション（注文、ポイント確認等）

- **メニュー画面**:
  - カテゴリ別表示
  - 検索・フィルター
  - アレルギー情報表示

- **商品詳細**:
  - カスタマイズオプション
  - 数量選択
  - お気に入り追加

- **カート機能**:
  - 商品追加・削除
  - 合計金額表示
  - 注文タイプ選択（店内/テイクアウト）

### 4.2 EC機能
- **商品購入**:
  - コーヒー豆・グッズ販売
  - 配送先入力
  - 決済画面（Mock）

### 4.3 その他機能
- **ポイントカード**: QRコード表示
- **注文履歴**: 過去の注文を表示
- **プッシュ通知**: 許可ダイアログのみ
- **オフライン対応**: Service Worker でキャッシュ

## 5. 店舗管理ダッシュボード機能

### 5.1 ダッシュボード
- 本日の売上サマリー
- 注文状況一覧
- 在庫アラート

### 5.2 注文管理
- リアルタイム注文リスト
- ステータス更新（受付中→調理中→完成）
- 注文詳細表示

### 5.3 メニュー管理
- 商品一覧
- 在庫切れ設定
- 価格変更

### 5.4 売上分析
- 日別・月別売上グラフ
- 人気商品ランキング
- 時間帯別分析

## 6. UI/UXデザイン方針

### 6.1 顧客用PWA
- **カラー**: 温かみのあるブラウン系
- **フォント**: 親しみやすい丸ゴシック
- **アニメーション**: スムーズな画面遷移
- **レスポンシブ**: モバイルファースト

### 6.2 管理ダッシュボード
- **カラー**: プロフェッショナルなグレー系
- **レイアウト**: サイドバー + メインコンテンツ
- **データ表示**: テーブル・グラフを活用

## 7. デモシナリオ

### 7.1 顧客フロー
1. アプリを開く → インストール促進バナー表示
2. メニューを見る → カスタマイズして注文
3. ポイントカード提示 → QRコード表示
4. 注文完了 → プッシュ通知（Mock）

### 7.2 店舗フロー
1. 新規注文受信 → 通知音とともに表示
2. 注文確認 → ステータスを「調理中」に
3. 調理完了 → ステータスを「完成」に
4. 売上確認 → グラフで可視化

## 8. 実装スケジュール

### Phase 1: 基盤構築（1週目）
- プロジェクトセットアップ
- 共通コンポーネント作成
- Mock データ・API実装

### Phase 2: 顧客用PWA（2-3週目）
- 基本画面実装
- PWA機能実装
- EC機能追加

### Phase 3: 管理ダッシュボード（4週目）
- 基本画面実装
- グラフ・分析機能
- 連携デモ作成

## 9. デプロイ方針
- **顧客用PWA**: Firebase Hosting（pwa.example.com）
- **管理ダッシュボード**: Firebase Hosting（admin.example.com）
- **デモ環境**: 両アプリを同時に開いてデモ実施